<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
	namespace:用于隔离SQL全局唯一（采用接口和XML开发时为接口的全路径）
 -->
<mapper namespace="com.dj.p2p.mapper.RiskControlMapper">

    <select id="getList" resultType="com.dj.p2p.riskcontrol.RiskControl">
        SELECT
            f.id,
            f.pro_no,
            f.pro_name,
            u.user_name,
            b.base_name AS pro_type,
            f.pro_apr,
            f.pro_money,
            bb.base_name AS pro_deadline,
            bbb.base_name AS pro_audit_status
        FROM
            p2p_financial f
        LEFT JOIN p2p_user_detail u ON f.borrower_id = u.user_id
        LEFT JOIN p2p_dict b ON b.`code` = f.pro_type
        LEFT JOIN p2p_dict bb ON bb.`code` = f.pro_deadline
        LEFT JOIN p2p_dict bbb ON bbb.`code` = f.pro_audit_status
        WHERE
            f.pro_audit_status = 'FIRST'
        OR f.pro_audit_status = 'SECOND'
        OR f.pro_audit_status = 'FINISH'
    </select>
    <select id="getP2pFinancial" resultType="com.dj.p2p.riskcontrol.RiskControl">
        SELECT
            f.id,
            f.borrower_id,
            f.pro_no,
            f.pro_name,
            u.user_name,
            b.base_name AS pro_type,
            f.pro_apr,
            f.pro_money,
            f.pro_exp,
            bb.base_name AS pro_deadline,
            bbb.base_name AS pro_audit_status,
            bc.base_name AS pro_rep_type
        FROM
            p2p_financial f
        LEFT JOIN p2p_user_detail u ON f.borrower_id = u.user_id
        LEFT JOIN p2p_dict b ON b.`code` = f.pro_type
        LEFT JOIN p2p_dict bb ON bb.`code` = f.pro_deadline
        LEFT JOIN p2p_dict bbb ON bbb.`code` = f.pro_audit_status
        LEFT JOIN p2p_dict bc ON bc.`code` = f.pro_rep_type
        WHERE
            f.id = #{id}
    </select>
</mapper>